<!-- pages/my/index.wxml -->
<view class="my-page">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <!-- èƒŒæ™¯è£…é¥° -->
    <view class="bg-decoration"></view>
    
    <view class="user-header">
      <!-- å¤´åƒ -->
      <view class="avatar-section">
        <view class="avatar-container">
          <view wx:if="{{!userInfo.avatar}}" class="avatar-emoji">ğŸ‘¨â€âš•ï¸</view>
          <image wx:else class="avatar" src="{{userInfo.avatar}}" mode="aspectFill" />
          <view class="avatar-status"></view>
        </view>
        <view class="edit-avatar" bindtap="onEditAvatar">ğŸ“·</view>
      </view>
      
      <!-- åŸºæœ¬ä¿¡æ¯ -->
      <view class="user-info">
        <view class="user-name">{{userInfo.realName || userInfo.nickname || 'å¿ƒç†å’¨è¯¢å¸ˆ'}}</view>
        <view class="user-qualification">{{userInfo.qualification || 'å›½å®¶è®¤è¯å¿ƒç†å’¨è¯¢å¸ˆ'}}</view>
        <view class="user-stats">
          <view class="stat-item">
            <text class="stat-value">{{statistics.activeClientCount || 0}}</text>
            <text class="stat-label">åœ¨æ¡ˆæ¥è®¿è€…</text>
          </view>
          <view class="divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{statistics.monthSessionCount || 0}}</text>
            <text class="stat-label">æœ¬æœˆå’¨è¯¢</text>
          </view>
          <view class="divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{statistics.totalSessionCount || 0}}</text>
            <text class="stat-label">æ€»å’¨è¯¢æ•°</text>
          </view>
        </view>
      </view>
      
      <!-- è®¾ç½®æŒ‰é’® -->
      <view class="setting-btn" bindtap="onSettingsClick">
        <view class="setting-icon">âš™ï¸</view>
      </view>
    </view>
  </view>

  <!-- è®¢é˜…çŠ¶æ€ -->
  <view class="subscription-card" bindtap="onSubscriptionClick">
    <view class="subscription-header">
      <view class="subscription-icon">ğŸ‘‘</view>
      <view class="subscription-info">
        <view class="subscription-title">{{subscription.planName || 'å…è´¹ç‰ˆ'}}</view>
        <view class="subscription-desc">
          {{subscription.endTime ? 'åˆ°æœŸæ—¶é—´: ' + formatDate(subscription.endTime) : 'ç‚¹å‡»äº†è§£ä¸“ä¸šç‰ˆæƒç›Š'}}
        </view>
      </view>
    </view>
    <view class="subscription-action">
      <text class="action-text">{{subscription.status === 1 ? 'ç®¡ç†è®¢é˜…' : 'å‡çº§ä¸“ä¸šç‰ˆ'}}</text>
      <view class="action-arrow">â€º</view>
    </view>
  </view>

  <!-- åŠŸèƒ½åˆ—è¡¨ -->
  <view class="function-list">
    <!-- æ•°æ®ç®¡ç† -->
    <view class="function-section">
      <view class="section-title">æ•°æ®ç®¡ç†</view>
      <view class="function-grid">
        <view class="function-item" bindtap="onDataBackup">
          <view class="function-icon">ğŸ’¾</view>
          <view class="function-text">æ•°æ®å¤‡ä»½</view>
        </view>
        <view class="function-item" bindtap="onDataExport">
          <view class="function-icon">ğŸ“¤</view>
          <view class="function-text">æ•°æ®å¯¼å‡º</view>
        </view>
        <view class="function-item" bindtap="onDataAnalysis">
          <view class="function-icon">ğŸ“Š</view>
          <view class="function-text">æ•°æ®åˆ†æ</view>
        </view>
        <view class="function-item" bindtap="onDataSync">
          <view class="function-icon">ğŸ”„</view>
          <view class="function-text">æ•°æ®åŒæ­¥</view>
        </view>
      </view>
    </view>

    <!-- ä¸ªäººè®¾ç½® -->
    <view class="function-section">
      <view class="section-title">ä¸ªäººè®¾ç½®</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onProfileClick">
          <view class="menu-left">
            <view class="menu-icon">ğŸ‘¤</view>
            <view class="menu-text">ä¸ªäººèµ„æ–™</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onReminderSetting">
          <view class="menu-left">
            <view class="menu-icon">â°</view>
            <view class="menu-text">æé†’è®¾ç½®</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onPrivacySetting">
          <view class="menu-left">
            <view class="menu-icon">ğŸ”’</view>
            <view class="menu-text">éšç§è®¾ç½®</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onThemeSetting">
          <view class="menu-left">
            <view class="menu-icon">ğŸ¨</view>
            <view class="menu-text">ä¸»é¢˜è®¾ç½®</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
      </view>
    </view>

    <!-- å·¥å…·ä¸æœåŠ¡ -->
    <view class="function-section">
      <view class="section-title">å·¥å…·ä¸æœåŠ¡</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onFeedback">
          <view class="menu-left">
            <view class="menu-icon">ğŸ’¬</view>
            <view class="menu-text">æ„è§åé¦ˆ</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onHelpCenter">
          <view class="menu-left">
            <view class="menu-icon">â“</view>
            <view class="menu-text">å¸®åŠ©ä¸­å¿ƒ</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onAboutApp">
          <view class="menu-left">
            <view class="menu-icon">â„¹ï¸</view>
            <view class="menu-text">å…³äºæˆ‘ä»¬</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
      </view>
    </view>

    <!-- ä¸“ä¸šå·¥å…· -->
    <view class="function-section">
      <view class="section-title">ä¸“ä¸šå·¥å…·</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onAssessmentTools">
          <view class="menu-left">
            <view class="menu-icon">ğŸ“‹</view>
            <view class="menu-text">è¯„ä¼°é‡è¡¨</view>
            <view class="menu-tag">ä¸“ä¸š</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onTemplateLibrary">
          <view class="menu-left">
            <view class="menu-icon">ğŸ“„</view>
            <view class="menu-text">æŠ¥å‘Šæ¨¡æ¿</view>
            <view class="menu-tag">ä¸“ä¸š</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
        
        <view class="menu-item" bindtap="onSupervisorNetwork">
          <view class="menu-left">
            <view class="menu-icon">ğŸ‘¨â€ğŸ«</view>
            <view class="menu-text">ç£å¯¼ç½‘ç»œ</view>
            <view class="menu-tag">ä¸“ä¸š</view>
          </view>
          <view class="menu-arrow">â€º</view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <view class="action-btn logout" bindtap="onLogout">
      <text class="logout-text">é€€å‡ºç™»å½•</text>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text>å¿ƒç†å’¨è¯¢å¸ˆåŠ©æ‰‹ v{{version}}</text>
  </view>
</view>